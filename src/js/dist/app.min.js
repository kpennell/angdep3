"use strict";function JSON_CALLBACK(){}angular.module("app",["ui.router","ui.bootstrap","oc.lazyLoad","firebase","simpleLogin","leaflet-directive"]).run(["simpleLogin",function(e){e.getUser()}]);var app=angular.module("app").config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(e,t,n,o){app.controller=e.register,app.directive=t.directive,app.filter=n.register,app.factory=o.factory,app.service=o.service,app.constant=o.constant,app.value=o.value}]).constant("version","0.8.0").constant("loginRedirectPath","/signin").constant("FBURL","https://torid-fire-4332.firebaseio.com").constant("loginProviders","facebook,password").run(["FBURL","$timeout",function(e,t){"https://INSTANCE.firebaseio.com"===e&&(angular.element(document.body).html("<h1>Please configure app/js/config.js before running!</h1>"),t(function(){angular.element(document.body).removeClass("hide")},250))}]);angular.module("app").run(["$rootScope","$state","$stateParams",function(e,t,n){e.$state=t,e.$stateParams=n}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,n){t.otherwise("/denver/shows"),e.state("denver",{"abstract":!0,url:"/denver",templateUrl:"tpl/app.html",resolve:{user:["simpleLogin",function(e){return e.getUser()}]}}).state("denver.shows",{url:"/shows",templateUrl:"tpl/vibesample.html",controller:"ShowsCtrl",resolve:{deps:["$ocLazyLoad",function(e){return e.load("js/controllers/ShowsCtrl.js")}]}}).state("denver.signin",{url:"/signin",templateUrl:"tpl/signin.html",controller:"SignInCtrl",resolve:{deps:["$ocLazyLoad",function(e){return e.load("js/controllers/signinctrl.js")}]}}).state("denver.account",{url:"/account",templateUrl:"tpl/account.html",controller:"AccountCtrl",authRequired:!0,resolve:{deps:["$ocLazyLoad",function(e){return e.load("js/controllers/AccountCtrl.js")}],user:["simpleLogin",function(e){return e.getUser()}]}}).state("denver.favorites",{url:"/favorites",templateUrl:"tpl/favorites.html",controller:"FavoritesCtrl",authRequired:!0,resolve:{deps:["$ocLazyLoad",function(e){return e.load("js/controllers/favoritesctrl.js")}],user:["simpleLogin",function(e){return e.getUser()}]}}).state("denver.about",{url:"/about",templateUrl:"tpl/about.html"})}]),angular.module("firebase.utils",["firebase","app"]).factory("fbutil",["$window","FBURL","$firebase",function(e,t,n){function o(e){for(var t=0;t<e.length;t++)if(angular.isArray(e[t]))e[t]=o(e[t]);else if("string"!=typeof e[t])throw new Error("Argument "+t+" to firebaseRef is not a string: "+e[t]);return e.join("/")}function a(n){var a=new e.Firebase(t),r=Array.prototype.slice.call(arguments);return r.length&&(a=a.child(o(r))),a}function r(e,t){var o=a(e);return t=angular.extend({},t),angular.forEach(["limit","startAt","endAt"],function(e){if(t.hasOwnProperty(e)){var n=t[e];o=o[e].apply(o,angular.isArray(n)?n:[n]),delete t[e]}}),n(o,t)}return{syncObject:function(e,t){return r.apply(null,arguments).$asObject()},syncArray:function(e,t){return r.apply(null,arguments).$asArray()},ref:a}}]),angular.module("app").controller("AppCtrl",["$scope","$window",function(e,t){e.app={name:"Vibesample",version:".5",color:{primary:"#7266ba",info:"#23b7e5",success:"#27c24c",warning:"#fad733",danger:"#f05050",light:"#e8eff0",dark:"#3a3f51",black:"#1c2b36"},settings:{themeID:1,navbarHeaderColor:"bg-white-only",navbarCollapseColor:"bg-white-only",asideColor:"bg-black",headerFixed:!0,asideFixed:!1,asideFolded:!1,asideDock:!1,container:!1}}}]),app.controller("AccountCtrl",["$scope","simpleLogin","fbutil","user","$state","$rootScope",function(e,t,n,o,a,r){function i(){e.err=null,e.msg=null,e.emailerr=null,e.emailmsg=null}var s=n.syncObject(["users",o.uid]);s.$bindTo(e,"profile"),e.signout=function(){r.FavoritesLength=0,s.$destroy(),t.logout(),a.go("denver.shows")},e.changePassword=function(n,o,a){i(),n&&o&&a?a!==o?e.err="New pass and confirm do not match":t.changePassword(s.email,n,a).then(function(){e.msg="Password changed"},function(t){e.err=t}):e.err="Please fill in all password fields"},e.clear=i,e.changeEmail=function(o,a){i(),s.$destroy(),t.changeEmail(o,a).then(function(t){s=n.syncObject(["users",t.uid]),s.$bindTo(e,"profile"),e.emailmsg="Email changed"},function(t){e.emailerr=t})}}]),app.controller("ShowsCtrl",["$scope","$rootScope","$state","$firebase","$filter","simpleLogin","leafletData","Player",function(e,t,n,o,a,r,i,s){function l(t){var n=t.target;n.setIcon(f),e.$apply(function(){e.hoveritem=n.feature.properties.id.replace(/^\D+/g,"")})}function c(t){var n=t.target;n.setIcon(p),e.$apply(function(){e.hoveritem={}})}var u=new Firebase("https://torid-fire-4332.firebaseio.com"),d=o(u.child("shows"));e.shows=d.$asArray(),e.listShows=[],e.filteredShows=[],e.daysAhead=.01,e.day=Date.now(),e.selectDay=function(t){var n=Date.now();e.day=t,e.daysAhead=(e.day-n)/864e5},e.days=[e.day+0,e.day+864e5,e.day+1728e5,e.day+2592e5,e.day+3456e5,e.day+432e6,e.day+5184e5],e.radioModel="Right",e.checkModel={left:!1,middle:!1,right:!0},e.checkIfLoggedIn=function(t){null===r.user?n.go("denver.signin"):e.toggleStarred(t)},r.getUser().then(function(n){if(n){var a=o(u.child("users").child(n.uid).child("favorites"));e.loggedInUserFavorites=a.$asObject(),e.loggedInUserFavorites.$loaded(function(){var n=function(){t.FavoritesLength=0,angular.forEach(e.loggedInUserFavorites,function(n,o){e.loggedInUserFavorites[o]===!0&&t.FavoritesLength++})};n(),e.toggleStarred=function(t){e.loggedInUserFavorites[t.properties.id]===!0?e.loggedInUserFavorites[t.properties.id]=!1:void 0===e.loggedInUserFavorites.$value?e.loggedInUserFavorites[t.properties.id]=!0:e.loggedInUserFavorites[t.properties.id]=!0,e.loggedInUserFavorites.$save(),n()}})}}),e.shows.$loaded(function(){e.listShows=e.shows[0],e.$watch("daysAhead",function(){e.filteredShows=a("upComing")(e.listShows,"properties.date",e.daysAhead),angular.extend(e,{geojson:{data:e.filteredShows,onEachFeature:function(e,t){t.bindPopup(e.properties.artist+"&nbsp;&#64;&nbsp;"+e.properties.venue_name),t.setIcon(p),t.on({mouseover:l,mouseout:c}),g[e.properties.id]=t}}})})}),e.player=s,e.$on("statusChanged",function(){e.$$phase||e.$digest()}),e.$watch("player.currentTrack.properties.id",function(){angular.element(".list-group-item").removeClass("playing"),s.currentTrack&&s.currentTrack.properties.id&&angular.element(".list-group-item"+s.currentTrack.properties.id).addClass("playing")}),e.setPosition=function(e){var t=(e.pageX-e.currentTarget.offsetLeft)/e.currentTarget.offsetWidth;s.setPosition(t)},angular.extend(e,{center:{lat:39.7406605,lng:-104.9793772,zoom:13,scrollWheelZoom:"center"},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoia3Blbm5lbGwiLCJhIjoid3QxaFNMTSJ9.5HjAo-fmMghcHGeCMOMheg",maxZoom:16,path:{weight:2,color:"#800000",opacity:1}}});var p=L.icon({iconUrl:"img/marker-icon.png",shadowUrl:"img/marker-shadow.png",popupAnchor:[1,-24],iconAnchor:[13,27]}),f=L.icon({iconUrl:"img/marker-green.png",shadowUrl:"img/marker-shadow.png",popupAnchor:[1,-24],iconAnchor:[13,27]}),g={};e.hoveritem={},e.menuMouse=function(e){var t=g[e.properties.id];t.setIcon(f),t.openPopup()},e.menuMouseout=function(e){var t=g[e.properties.id];t.setIcon(p),t.closePopup()}}]),app.controller("AccordionDemoCtrl",["$scope",function(e){e.oneAtATime=!0,e.groups=[{title:"Accordion group header - #1",content:"Dynamic group body - #1"},{title:"Accordion group header - #2",content:"Dynamic group body - #2"}],e.items=["Item 1","Item 2","Item 3"],e.addItem=function(){var t=e.items.length+1;e.items.push("Item "+t)},e.status={isFirstOpen:!0,isFirstDisabled:!1}}]),app.controller("AlertDemoCtrl",["$scope",function(e){e.alerts=[{type:"success",msg:"Well done! You successfully read this important alert message."},{type:"info",msg:"Heads up! This alert needs your attention, but it is not super important."},{type:"warning",msg:"Warning! Best check yo self, you are not looking too good..."}],e.addAlert=function(){e.alerts.push({type:"danger",msg:"Oh snap! Change a few things up and try submitting again."})},e.closeAlert=function(t){e.alerts.splice(t,1)}}]),app.controller("ButtonsDemoCtrl",["$scope",function(e){e.singleModel=1,e.radioModel="Middle",e.checkModel={left:!1,middle:!0,right:!1}}]),app.controller("CarouselDemoCtrl",["$scope",function(e){e.myInterval=5e3;var t=e.slides=[];e.addSlide=function(){t.push({image:"img/c"+t.length+".jpg",text:["Carousel text #0","Carousel text #1","Carousel text #2","Carousel text #3"][t.length%4]})};for(var n=0;4>n;n++)e.addSlide()}]),app.controller("DropdownDemoCtrl",["$scope",function(e){e.items=["The first choice!","And another choice for you.","but wait! A third!"],e.status={isopen:!1},e.toggled=function(e){},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen}}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(e,t,n){e.items=n,e.selected={item:e.items[0]},e.ok=function(){t.close(e.selected.item)},e.cancel=function(){t.dismiss("cancel")}}]),app.controller("ModalDemoCtrl",["$scope","$modal","$log",function(e,t,n){e.items=["item1","item2","item3"],e.open=function(o){var a=t.open({templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:o,resolve:{items:function(){return e.items}}});a.result.then(function(t){e.selected=t},function(){n.info("Modal dismissed at: "+new Date)})}}]),app.controller("PaginationDemoCtrl",["$scope","$log",function(e,t){e.totalItems=64,e.currentPage=4,e.setPage=function(t){e.currentPage=t},e.pageChanged=function(){t.info("Page changed to: "+e.currentPage)},e.maxSize=5,e.bigTotalItems=175,e.bigCurrentPage=1}]),app.controller("PopoverDemoCtrl",["$scope",function(e){e.dynamicPopover="Hello, World!",e.dynamicPopoverTitle="Title"}]),app.controller("ProgressDemoCtrl",["$scope",function(e){e.max=200,e.random=function(){var t,n=Math.floor(100*Math.random()+1);t=25>n?"success":50>n?"info":75>n?"warning":"danger",e.showWarning="danger"===t||"warning"===t,e.dynamic=n,e.type=t},e.random(),e.randomStacked=function(){e.stacked=[];for(var t=["success","info","warning","danger"],n=0,o=Math.floor(4*Math.random()+1);o>n;n++){var a=Math.floor(4*Math.random());e.stacked.push({value:Math.floor(30*Math.random()+1),type:t[a]})}},e.randomStacked()}]),app.controller("TabsDemoCtrl",["$scope",function(e){e.tabs=[{title:"Dynamic Title 1",content:"Dynamic content 1"},{title:"Dynamic Title 2",content:"Dynamic content 2",disabled:!0}]}]),app.controller("RatingDemoCtrl",["$scope",function(e){e.rate=7,e.max=10,e.isReadonly=!1,e.hoveringOver=function(t){e.overStar=t,e.percent=100*(t/e.max)}}]),app.controller("TooltipDemoCtrl",["$scope",function(e){e.dynamicTooltip="Hello, World!",e.dynamicTooltipText="dynamic",e.htmlTooltip="I've been made <b>bold</b>!"}]),app.controller("TypeaheadDemoCtrl",["$scope","$http",function(e,t){e.selected=void 0,e.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],e.getLocation=function(e){return t.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:e,sensor:!1}}).then(function(e){var t=[];return angular.forEach(e.data.results,function(e){t.push(e.formatted_address)}),t})}}]),app.controller("DatepickerDemoCtrl",["$scope",function(e){e.today=function(){e.dt=new Date},e.today(),e.clear=function(){e.dt=null},e.disabled=function(e,t){return"day"===t&&(0===e.getDay()||6===e.getDay())},e.toggleMin=function(){e.minDate=e.minDate?null:new Date},e.toggleMin(),e.open=function(t){t.preventDefault(),t.stopPropagation(),e.opened=!0},e.dateOptions={formatYear:"yy",startingDay:1,"class":"datepicker"},e.initDate=new Date("2016-15-20"),e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0]}]),app.controller("TimepickerDemoCtrl",["$scope",function(e){e.mytime=new Date,e.hstep=1,e.mstep=15,e.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},e.ismeridian=!0,e.toggleMode=function(){e.ismeridian=!e.ismeridian},e.update=function(){var t=new Date;t.setHours(14),t.setMinutes(0),e.mytime=t},e.changed=function(){},e.clear=function(){e.mytime=null}}]),app.controller("FlotChartDemoCtrl",["$scope",function(e){e.d=[[1,6.5],[2,6.5],[3,7],[4,8],[5,7.5],[6,7],[7,6.8],[8,7],[9,7.2],[10,7],[11,6.8],[12,7]],e.d0_1=[[0,7],[1,6.5],[2,12.5],[3,7],[4,9],[5,6],[6,11],[7,6.5],[8,8],[9,7]],e.d0_2=[[0,4],[1,4.5],[2,7],[3,4.5],[4,3],[5,3.5],[6,6],[7,3],[8,4],[9,3]],e.d1_1=[[10,120],[20,70],[30,70],[40,60]],e.d1_2=[[10,50],[20,60],[30,90],[40,35]],e.d1_3=[[10,80],[20,40],[30,30],[40,20]],e.d2=[];for(var t=0;20>t;++t)e.d2.push([t,Math.round(100*Math.sin(t))/100]);e.d3=[{label:"iPhone5S",data:40},{label:"iPad Mini",data:10},{label:"iPad Mini Retina",data:20},{label:"iPhone4S",data:12},{label:"iPad Air",data:18}],e.refreshData=function(){e.d0_1=e.d0_2},e.getRandomData=function(){var e=[],t=150;for(e.length>0&&(e=e.slice(1));e.length<t;){var n=e.length>0?e[e.length-1]:50,o=n+10*Math.random()-5;0>o?o=0:o>100&&(o=100),e.push(Math.round(100*o)/100)}for(var a=[],r=0;r<e.length;++r)a.push([r,e[r]]);return a},e.d4=e.getRandomData()}]),app.controller("ctrlname",["$scope","$http","$state",function(e,t,n){e.user={},e.authError=null,e.login=function(){e.authError=null}}]),app.controller("FavoritesCtrl",["$scope","$rootScope","$firebase","simpleLogin","$location",function(e,t,n,o,a){var r=new Firebase("https://torid-fire-4332.firebaseio.com"),i=n(r.child("shows"));e.shows=i.$asArray(),o.getUser().then(function(o){var a=n(r.child("users").child(o.uid).child("favorites"));e.UserFavorites=a.$asObject(),e.UserFavorites.$loaded(function(){var n;n=e.shows[0],e.currentlyFavorited=[],angular.forEach(n,function(t,o){e.UserFavorites[t.properties.id]===!0&&e.currentlyFavorited.push(n[o])});var o=function(){t.FavoritesLength=0,angular.forEach(e.UserFavorites,function(n,o){e.UserFavorites[o]===!0&&t.FavoritesLength++})};o(),e.toggleStarred=function(t){e.UserFavorites[t.properties.id]===!0?e.UserFavorites[t.properties.id]=!1:void 0===e.UserFavorites.$value?e.UserFavorites[t.properties.id]=!0:e.UserFavorites[t.properties.id]=!0,o(),e.UserFavorites.$save()}})}),e.favorite={},e.streamTrack=function(t){SC.stream(t.properties.stream_url,function(t){e.sound=t,soundManager.stopAll(),t.play()}),t.visible=!1},e.pauseTrack=function(t){e.sound.pause(),t.visible=!0}}]),app.controller("HomeCtrl",["$scope","$fbutil","user",function(e,t,n){e.syncedValue=fbutil.syncObject("syncedValue"),e.user=user,e.FBURL=FBURL}]),app.controller("SignInCtrl",["$scope","simpleLogin","$state","$firebaseSimpleLogin","$rootScope",function(e,t,n,o,a){function r(){return e.email?e.pass&&e.confirm?e.createMode&&e.pass!==e.confirm&&(e.err="Passwords do not match"):e.err="Please enter a password":e.err="Please enter an email address",!e.err}function i(e){return angular.isObject(e)&&e.code?e.code:e+""}e.email=null,e.pass=null,e.confirm=null,e.createMode=!1;var s=new Firebase("https://torid-fire-4332.firebaseio.com");e.auth=o(s),e.user=null,e.loginFacebook=function(t){e.auth.$login(t)},a.$on("$firebaseSimpleLogin:login",function(t,o){e.user=o,n.go("denver.shows")}),a.$on("$firebaseSimpleLogin:logout",function(t){e.user=null}),a.$on("$firebaseSimpleLogin:error",function(e,t){console.log("Error logging user in: ",t)}),e.loginEmail=function(o,a){e.err=null,e.loading=!0,t.login(o,a).then(function(){e.loading=!1,n.go("denver.shows")},function(t){e.err=i(t),e.loading=!1})},e.createAccount=function(){e.err=null,r()&&t.createAccount(e.email,e.pass).then(function(){n.go("denver.signin")},function(t){e.err=i(t)})},e.sendPasswordResetEmail=function(t){var a=new Firebase("https://torid-fire-4332.firebaseio.com");e.loginObj=o(a),e.loginObj.$sendPasswordResetEmail(t).then(function(){e.resetForm=!1,e.resetEmail="",n.go("denver.shows")},function(t){"INVALID_EMAIL"===t.code?(e.errors.push("There is no account associated with that email"),e.resetForm=!1):e.errors.push("Something went wrong..")})}}]),angular.module("app").directive("appVersion",["version",function(e){return function(t,n){n.text(e)}}]),angular.module("app").directive("ngHideAuth",["simpleLogin","$timeout",function(e,t){var n;return e.watch(function(e){n=!!e}),{restrict:"A",link:function(o,a){function r(){a.addClass("ng-cloak"),t(function(){a.toggleClass("ng-cloak",n!==!1)},0)}r(),e.watch(r,o)}}}]),angular.module("app").directive("ngShowAuth",["simpleLogin","$timeout",function(e,t){var n;return e.watch(function(e){n=!!e}),{restrict:"A",link:function(o,a){function r(){t(function(){a.toggleClass("ng-cloak",!n)},0)}a.addClass("ng-cloak"),r(),e.watch(r,o)}}}]),angular.module("app").directive("setNgAnimate",["$animate",function(e){return{link:function(t,n,o){t.$watch(function(){return t.$eval(o.setNgAnimate,t)},function(t,o){e.enabled(!!t,n)})}}}]),angular.module("app").directive("uiButterbar",["$rootScope","$anchorScroll",function(e,t){return{restrict:"AC",template:'<span class="bar"></span>',link:function(e,n,o){n.addClass("butterbar hide"),e.$on("$stateChangeStart",function(e){t(),n.removeClass("hide").addClass("active")}),e.$on("$stateChangeSuccess",function(e,t,o,a){e.targetScope.$watch("$viewContentLoaded",function(){n.addClass("hide").removeClass("active")})})}}}]),angular.module("app").directive("uiFocus",["$timeout","$parse",function(e,t){return{link:function(n,o,a){var r=t(a.uiFocus);n.$watch(r,function(t){t===!0&&e(function(){o[0].focus()})}),o.bind("blur",function(){n.$apply(r.assign(n,!1))})}}}]),angular.module("app").directive("uiFullscreen",["uiLoad","$document","$window",function(e,t,n){return{restrict:"AC",template:'<i class="fa fa-expand fa-fw text"></i><i class="fa fa-compress fa-fw text-active"></i>',link:function(n,o,a){o.addClass("hide"),e.load("vendor/libs/screenfull.min.js").then(function(){screenfull.enabled&&!navigator.userAgent.match(/Trident.*rv:11\./)&&o.removeClass("hide"),o.on("click",function(){var e;a.target&&(e=$(a.target)[0]),screenfull.toggle(e)}),t.on(screenfull.raw.fullscreenchange,function(){screenfull.isFullscreen?o.addClass("active"):o.removeClass("active")})})}}}]),angular.module("ui.jq",["ui.load"]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","JQ_CONFIG","uiLoad","$timeout",function(e,t,n,o){return{restrict:"A",compile:function(a,r){if(!angular.isFunction(a[r.uiJq])&&!t[r.uiJq])throw new Error('ui-jq: The "'+r.uiJq+'" function does not exist');var i=e&&e[r.uiJq];return function(e,a,r){function s(){var t=[];return r.uiOptions?(t=e.$eval("["+r.uiOptions+"]"),angular.isObject(i)&&angular.isObject(t[0])&&(t[0]=angular.extend({},i,t[0]))):i&&(t=[i]),t}function l(){o(function(){a[r.uiJq].apply(a,s())},0,!1)}function c(){r.uiRefresh&&e.$watch(r.uiRefresh,function(){l()})}r.ngModel&&a.is("select,input,textarea")&&a.bind("change",function(){a.trigger("input")}),t[r.uiJq]?n.load(t[r.uiJq]).then(function(){l(),c()})["catch"](function(){}):(l(),c())}}}}]),angular.module("app").directive("uiModule",["MODULE_CONFIG","uiLoad","$compile",function(e,t,n){return{restrict:"A",compile:function(o,a){var r=o.contents().clone();return function(o,a,i){a.contents().remove(),t.load(e[i.uiModule]).then(function(){n(r)(o,function(e,t){a.append(e)})})}}}}]),angular.module("app").directive("uiNav",["$timeout",function(e){return{restrict:"AC",link:function(e,t,n){var o,a=$(window),r=768,i=$(".app-aside"),s=".dropdown-backdrop";t.on("click","a",function(e){o&&o.trigger("mouseleave.nav");var t=$(this);t.parent().siblings(".active").toggleClass("active"),t.next().is("ul")&&t.parent().toggleClass("active")&&e.preventDefault(),t.next().is("ul")||a.width()<r&&$(".app-aside").removeClass("show off-screen")}),t.on("mouseenter","a",function(e){if(o&&o.trigger("mouseleave.nav"),$("> .nav",i).remove(),!(!$(".app-aside-fixed.app-aside-folded").length||a.width()<r||$(".app-aside-dock").length)){var t,n=$(e.target),l=$(window).height(),c=50,u=150;!n.is("a")&&(n=n.closest("a")),n.next().is("ul")&&(o=n.next(),n.parent().addClass("active"),t=n.parent().position().top+c,o.css("top",t),t+o.height()>l&&o.css("bottom",0),t+u>l&&o.css("bottom",l-t-c).css("top","auto"),o.appendTo(i),o.on("mouseleave.nav",function(e){$(s).remove(),o.appendTo(n.parent()),o.off("mouseleave.nav").css("top","auto").css("bottom","auto"),n.parent().removeClass("active")}),$(".smart").length&&$('<div class="dropdown-backdrop"/>').insertAfter(".app-aside").on("click",function(e){e&&e.trigger("mouseleave.nav")}))}}),i.on("mouseleave",function(e){o&&o.trigger("mouseleave.nav"),$("> .nav",i).remove()})}}}]),angular.module("app").directive("uiScroll",["$location","$anchorScroll",function(e,t){return{restrict:"AC",link:function(n,o,a){o.on("click",function(n){e.hash(a.uiScroll),t()})}}}]),angular.module("app").directive("uiShift",["$timeout",function(e){return{restrict:"A",link:function(t,n,o){function a(){e(function(){var e=o.uiShift,t=o.target;s.hasClass("in")||s[e](t).addClass("in")})}function r(){i&&i.prepend(n),!i&&s.insertAfter(c),s.removeClass("in")}var i,s=$(n),l=$(window),c=s.prev(),u=l.width();!c.length&&(i=s.parent()),768>u&&a()||r(),l.resize(function(){u!==l.width()&&e(function(){l.width()<768&&a()||r(),u=l.width()})})}}}]),angular.module("app").directive("uiToggleClass",["$timeout","$document",function(e,t){return{restrict:"AC",link:function(e,t,n){t.on("click",function(e){function o(e,t){for(var n=new RegExp("\\s"+e.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g"),o=" "+$(t)[0].className+" ";n.test(o);)o=o.replace(n," ");$(t)[0].className=$.trim(o)}e.preventDefault();var a=n.uiToggleClass.split(","),r=n.target&&n.target.split(",")||Array(t),i=0;angular.forEach(a,function(e){var t=r[r.length&&i];-1!==e.indexOf("*")&&o(e,t),$(t).toggleClass(e),i++}),$(t).toggleClass("active")})}}}]),angular.module("app").filter("fromNow",function(){return function(e){return moment(e).fromNow()}}),angular.module("app").filter("noFractionCurrency",["$filter","$locale",function(e,t){var n=e("currency"),o=t.NUMBER_FORMATS;return function(e,t){var a=n(e,t),r=a.indexOf(o.DECIMAL_SEP);return e>=0?a.substring(0,r):a.substring(0,r)+")"}}]),angular.module("app").filter("num",[function(){return function(e){return parseInt(e,10)}}]),angular.module("app").filter("prettyTime",function(){return function(e){var t=Math.floor(e/3600),n="0"+Math.floor(e%3600/60),o="0"+Math.floor(e%60);return n=n.substr(n.length-2),o=o.substr(o.length-2),isNaN(o)?"00:00":t?t+":"+n+":"+o:n+":"+o}}),angular.module("app").filter("upComing",["$parse",function(e){return function(t,n,o){var a=+Date.now()+864e5*(o-.5),r=+Date.now()+864e5*(o+.1),i=e(n);return(t||[]).filter(function(e){var t=+new Date(i(e));return t>a&&r>t})}}]),angular.module("changeEmail",["firebase.utils"]).factory("changeEmail",["fbutil","$q",function(e,t){return function(n,o,a,r){function i(){return r.login(f.old.email,n).then(function(e){f.old.uid=e.uid})}function s(){var n=t.defer();return f.old.ref=e.ref("users",f.old.uid),f.old.ref.once("value",function(e){var t=e.val();null===t?n.reject(o+" not found"):(f.old.name=t.name,n.resolve())},function(e){n.reject(e)}),n.promise}function l(){return r.createAccount(f.curr.email,n,f.old.name).then(function(e){f.curr.uid=e.uid})}function c(){var n=t.defer();f.curr.ref=e.ref("users",f.curr.uid);var o={email:f.curr.email,name:f.old.name||""};return f.curr.ref.set(o,function(e){e?n.reject(e):n.resolve()}),n.promise}function u(){var e=t.defer();return f.old.ref.remove(function(t){t?e.reject(t):e.resolve()}),e.promise}function d(){var e=t.defer();return r.removeUser(f.old.email,n).then(function(){e.resolve()},function(t){e.reject(t)}),e.promise}function p(){return r.login(f.curr.email,n)}var f={old:{email:o},curr:{email:a}};return i().then(s).then(l).then(c).then(i).then(u).then(d).then(p)["catch"](function(e){return console.error(e),t.reject(e)})}}]),angular.module("app").service("Player",["$rootScope",function(e){var t;return e.trackPlayingIndex,{playing:!1,play:function(n,o){if(e.trackPlayingIndex=o,!n)return void(this.currentTrack&&t&&(t.play(),this.playing=!0,e.$broadcast("statusChanged",!0)));var a=this;SC.stream(n.properties.stream_url,function(o){t&&t.stop(),o.play({whileplaying:function(){a.duration=Math.floor(this.durationEstimate/1e3),a.position=Math.floor(this.position/1e3),a.progress=this.position/this.durationEstimate*100,e.$broadcast("statusChanged",!0)},onfinish:function(){e.$broadcast("finished")}}),t=o,a.currentTrack=n,a.playing=!0,e.$broadcast("statusChanged",!0)})},pause:function(){t&&(t.pause(),this.playing=!1,e.trackPlayingIndex={},e.$broadcast("statusChanged",!0))},setPosition:function(e){t.setPosition(e*t.duration)}}}]),angular.module("simpleLogin",["firebase","firebase.utils","changeEmail"]).factory("requireUser",["simpleLogin","$q",function(e,t){return function(){return e.getUser().then(function(e){return e?e:t.reject({authRequired:!0})})}}]).factory("simpleLogin",["$firebaseSimpleLogin","fbutil","createProfile","changeEmail","$q","$rootScope",function(e,t,n,o,a,r){function i(){c.getUser().then(function(e){c.user=e||null,angular.forEach(l,function(t){t(e||null)})})}var s=e(t.ref()),l=[],c={user:null,getUser:function(){return s.$getCurrentUser()},login:function(e,t){return s.$login("password",{email:e,password:t,rememberMe:!0})},logout:function(){s.$logout()},createAccount:function(e,t,o){return s.$createUser(e,t).then(function(){return c.login(e,t)}).then(function(t){return n(t.uid,e,o).then(function(){return t})})},changePassword:function(e,t,n){return s.$changePassword(e,t,n)},changeEmail:function(e,t){return o(e,c.user.email,t,this)},removeUser:function(e,t){return s.$removeUser(e,t)},watch:function(e,t){c.getUser().then(function(t){e(t)}),l.push(e);var n=function(){var t=l.indexOf(e);t>-1&&l.splice(t,1)};return t&&t.$on("$destroy",n),n}};return r.$on("$firebaseSimpleLogin:login",i),r.$on("$firebaseSimpleLogin:logout",i),r.$on("$firebaseSimpleLogin:error",i),i(),c}]).factory("createProfile",["fbutil","$q","$timeout",function(e,t,n){return function(o,a,r){function i(e){return s(e.substr(0,e.indexOf("@"))||"")}function s(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)}var l=e.ref("users",o),c=t.defer();return l.set({email:a,name:r||i(a)},function(e){n(function(){e?c.reject(e):c.resolve(l)})}),c.promise}}]),angular.module("ui.load",[]).service("uiLoad",["$document","$q","$timeout",function(e,t,n){var o=[],a=!1,r=t.defer();this.load=function(e){e=angular.isArray(e)?e:e.split(/\s+/);var t=this;return a||(a=r.promise),angular.forEach(e,function(e){a=a.then(function(){return e.indexOf(".css")>=0?t.loadCSS(e):t.loadScript(e)})}),r.resolve(),a},this.loadScript=function(a){if(o[a])return o[a].promise;var r=t.defer(),i=e[0].createElement("script");return i.src=a,i.onload=function(e){n(function(){r.resolve(e)})},i.onerror=function(e){n(function(){r.reject(e)})},e[0].body.appendChild(i),o[a]=r,r.promise},this.loadCSS=function(a){if(o[a])return o[a].promise;var r=t.defer(),i=e[0].createElement("link");return i.rel="stylesheet",i.type="text/css",i.href=a,i.onload=function(e){n(function(){r.resolve(e)})},i.onerror=function(e){n(function(){r.reject(e)})},e[0].head.appendChild(i),o[a]=r,r.promise}}]),app.controller("FullcalendarCtrl",["$scope",function(e){var t=new Date,n=t.getDate(),o=t.getMonth(),a=t.getFullYear();e.eventSource={url:"http://www.google.com/calendar/feeds/usa__en%40holiday.calendar.google.com/public/basic",className:"gcal-event",currentTimezone:"America/Chicago"},e.events=[{title:"All Day Event",start:new Date(a,o,1),className:["b-l b-2x b-info"],location:"New York",info:"This a all day event that will start from 9:00 am to 9:00 pm, have fun!"},{title:"Dance class",start:new Date(a,o,3),end:new Date(a,o,4,9,30),allDay:!1,className:["b-l b-2x b-danger"],location:"London",info:"Two days dance training class."},{title:"Game racing",start:new Date(a,o,6,16,0),className:["b-l b-2x b-info"],location:"Hongkong",info:"The most big racing of this year."},{title:"Soccer",start:new Date(a,o,8,15,0),className:["b-l b-2x b-info"],location:"Rio",info:"Do not forget to watch."},{title:"Family",start:new Date(a,o,9,19,30),end:new Date(a,o,9,20,30),className:["b-l b-2x b-success"],info:"Family party"},{title:"Long Event",start:new Date(a,o,n-5),end:new Date(a,o,n-2),className:["bg-success bg"],location:"HD City",info:"It is a long long event"},{title:"Play game",start:new Date(a,o,n-1,16,0),className:["b-l b-2x b-info"],location:"Tokyo",info:"Tokyo Game Racing"},{title:"Birthday Party",start:new Date(a,o,n+1,19,0),end:new Date(a,o,n+1,22,30),allDay:!1,className:["b-l b-2x b-primary"],location:"New York",info:"Party all day"},{title:"Repeating Event",start:new Date(a,o,n+4,16,0),alDay:!1,className:["b-l b-2x b-warning"],location:"Home Town",info:"Repeat every day"},{title:"Click for Google",start:new Date(a,o,28),end:new Date(a,o,29),url:"http://google.com/",className:["b-l b-2x b-primary"]},{title:"Feed cat",start:new Date(a,o+1,6,18,0),className:["b-l b-2x b-info"]}],e.precision=400,e.lastClickTime=0,e.alertOnEventClick=function(t,n,o){var a=(new Date).getTime();a-e.lastClickTime<=e.precision&&e.events.push({title:"New Event",start:t,className:["b-l b-2x b-info"]}),e.lastClickTime=a},e.alertOnDrop=function(t,n,o,a,r,i){e.alertMessage="Event Droped to make dayDelta "+n},e.alertOnResize=function(t,n,o,a,r,i){e.alertMessage="Event Resized to make dayDelta "+n},e.overlay=$(".fc-overlay"),e.alertOnMouseOver=function(t,n,o){e.event=t,e.overlay.removeClass("left right").find(".arrow").removeClass("left right top pull-up");var a=$(n.target).closest(".fc-event"),r=a.closest(".calendar"),i=a.offset().left-r.offset().left,s=r.width()-(a.offset().left-r.offset().left+a.width());s>e.overlay.width()?e.overlay.addClass("left").find(".arrow").addClass("left pull-up"):i>e.overlay.width()?e.overlay.addClass("right").find(".arrow").addClass("right pull-up"):e.overlay.find(".arrow").addClass("top"),0==a.find(".fc-overlay").length&&a.append(e.overlay)},e.uiConfig={calendar:{height:450,editable:!0,header:{left:"prev",center:"title",right:"next"},dayClick:e.alertOnEventClick,eventDrop:e.alertOnDrop,eventResize:e.alertOnResize,eventMouseover:e.alertOnMouseOver}},e.addEvent=function(){e.events.push({title:"New Event",start:new Date(a,o,n),className:["b-l b-2x b-info"]})},e.remove=function(t){e.events.splice(t,1)},e.changeView=function(e,t){$(".calendar").fullCalendar("changeView",e)},e.today=function(e){$(".calendar").fullCalendar("today")},e.eventSources=[e.events]}]),app.controller("ContactCtrl",["$scope","$http","$filter",function(e,t,n){t.get("js/app/contact/contacts.json").then(function(t){e.items=t.data.items,e.item=n("orderBy")(e.items,"first")[0],e.item.selected=!0}),e.filter="",e.groups=[{name:"Coworkers"},{name:"Family"},{name:"Friends"},{name:"Partners"},{name:"Group"}],e.createGroup=function(){var t={name:"New Group"};t.name=e.checkItem(t,e.groups,"name"),e.groups.push(t)},e.checkItem=function(e,t,n){var o=0;return angular.forEach(t,function(t){if(0==t[n].indexOf(e[n])){var a=t[n].replace(e[n],"").trim();o=a?Math.max(o,parseInt(a)+1):1}}),e[n]+(o?" "+o:"")},e.deleteGroup=function(t){e.groups.splice(e.groups.indexOf(t),1)},e.selectGroup=function(t){angular.forEach(e.groups,function(e){e.selected=!1}),e.group=t,e.group.selected=!0,e.filter=t.name},e.selectItem=function(t){angular.forEach(e.items,function(e){e.selected=!1,e.editing=!1}),e.item=t,e.item.selected=!0},e.deleteItem=function(t){e.items.splice(e.items.indexOf(t),1),e.item=n("orderBy")(e.items,"first")[0],e.item&&(e.item.selected=!0)},e.createItem=function(){var t={group:"Friends",avatar:"img/a0.jpg"};e.items.push(t),e.selectItem(t),e.item.editing=!0;
},e.editItem=function(e){e&&e.selected&&(e.editing=!0)},e.doneEditing=function(e){e.editing=!1}}]),app.factory("mails",["$http",function(e){var t="js/app/mail/mails.json",n=e.get(t).then(function(e){return e.data.mails}),o={};return o.all=function(){return n},o.get=function(e){return n.then(function(t){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null})},o}]),app.controller("MailCtrl",["$scope",function(e){e.folds=[{name:"Inbox",filter:""},{name:"Starred",filter:"starred"},{name:"Sent",filter:"sent"},{name:"Important",filter:"important"},{name:"Draft",filter:"draft"},{name:"Trash",filter:"trash"}],e.labels=[{name:"Angular",filter:"angular",color:"#23b7e5"},{name:"Bootstrap",filter:"bootstrap",color:"#7266ba"},{name:"Client",filter:"client",color:"#fad733"},{name:"Work",filter:"work",color:"#27c24c"}],e.addLabel=function(){e.labels.push({name:e.newLabel.name,filter:angular.lowercase(e.newLabel.name),color:"#ccc"}),e.newLabel.name=""},e.labelClass=function(e){return{"b-l-info":"angular"===angular.lowercase(e),"b-l-primary":"bootstrap"===angular.lowercase(e),"b-l-warning":"client"===angular.lowercase(e),"b-l-success":"work"===angular.lowercase(e)}}}]),app.controller("MailListCtrl",["$scope","mails","$stateParams",function(e,t,n){e.fold=n.fold,t.all().then(function(t){e.mails=t})}]),app.controller("MailDetailCtrl",["$scope","mails","$stateParams",function(e,t,n){t.get(n.mailId).then(function(t){e.mail=t})}]),app.controller("MailNewCtrl",["$scope",function(e){e.mail={to:"",subject:"",content:""},e.tolist=[{name:"James",email:"james@gmail.com"},{name:"Luoris Kiso",email:"luoris.kiso@hotmail.com"},{name:"Lucy Yokes",email:"lucy.yokes@gmail.com"}]}]),angular.module("app").directive("labelColor",function(){return function(e,t,n){t.css({color:n.color})}});var loadGoogleMaps=function(e){var t,n=e.now();return function(o,a,r){if(t)return t;var i=e.Deferred(),s=function(){i.resolve(window.google&&google.maps?google.maps:!1)},l="loadGoogleMaps_"+n++,c=e.extend({sensor:!1},a?{key:a}:{},r?{language:r}:{});return window.google&&google.maps?s():window.google&&google.load?google.load("maps",o||3,{other_params:e.param(c),callback:s}):(c=e.extend(c,{v:o||3,callback:l}),window[l]=function(){s(),setTimeout(function(){try{delete window[l]}catch(e){}},20)},e.ajax({dataType:"script",data:c,url:"http://maps.google.com/maps/api/js"})),t=i.promise()}}(jQuery);app.controller("MapCtrl",["$scope",function(e){e.myMarkers=[],e.mapOptions={center:new google.maps.LatLng(35.784,-78.67),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP},e.addMarker=function(t,n){e.myMarkers.push(new google.maps.Marker({map:e.myMap,position:n[0].latLng}))},e.setZoomMessage=function(t){e.zoomMessage="You just zoomed to "+t+"!",console.log(t,"zoomed")},e.openMarkerInfo=function(t){e.currentMarker=t,e.currentMarkerLat=t.getPosition().lat(),e.currentMarkerLng=t.getPosition().lng(),e.myInfoWindow.open(e.myMap,t)},e.setMarkerPosition=function(e,t,n){e.setPosition(new google.maps.LatLng(t,n))}}]),function(){function e(e,t,n,o){angular.forEach(t.split(" "),function(t){window.google.maps.event.addListener(n,t,function(n){o.triggerHandler("map-"+t,n),e.$$phase||e.$apply()})})}function t(t,n){app.directive(t,[function(){return{restrict:"A",link:function(o,a,r){o.$watch(r[t],function(t){t&&e(o,n,t,a)})}}}])}app.value("uiMapConfig",{}),app.directive("uiMap",["uiMapConfig","$parse",function(t,n){var o="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed",a=t||{};return{restrict:"A",link:function(t,r,i){var s=angular.extend({},a,t.$eval(i.uiOptions)),l=new window.google.maps.Map(r[0],s),c=n(i.uiMap);c.assign(t,l),e(t,o,l,r)}}}]),app.value("uiMapInfoWindowConfig",{}),app.directive("uiMapInfoWindow",["uiMapInfoWindowConfig","$parse","$compile",function(t,n,o){var a="closeclick content_change domready position_changed zindex_changed",r=t||{};return{link:function(t,i,s){var l=angular.extend({},r,t.$eval(s.uiOptions));l.content=i[0];var c=n(s.uiMapInfoWindow),u=c(t);u||(u=new window.google.maps.InfoWindow(l),c.assign(t,u)),e(t,a,u,i),i.replaceWith("<div></div>");var d=u.open;u.open=function(e,n,a,r,s,l){o(i.contents())(t),d.call(u,e,n,a,r,s,l)}}}}]),t("uiMapMarker","animation_changed click clickable_changed cursor_changed dblclick drag dragend draggable_changed dragstart flat_changed icon_changed mousedown mouseout mouseover mouseup position_changed rightclick shadow_changed shape_changed title_changed visible_changed zindex_changed"),t("uiMapPolyline","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),t("uiMapPolygon","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),t("uiMapRectangle","bounds_changed click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),t("uiMapCircle","center_changed click dblclick mousedown mousemove mouseout mouseover mouseup radius_changed rightclick"),t("uiMapGroundOverlay","click dblclick")}(),app.controller("MusicCtrl",["$sce","$scope",function(e,t){t.API=null,t.active=0,t.audios=[{title:"1. Lentement",artist:"Miaow",poster:"img/b0.jpg",sources:[{src:e.trustAsResourceUrl("http://flatfull.com/themes/assets/musics/Miaow-03-Lentement.mp3"),type:"audio/mpeg"},{src:e.trustAsResourceUrl("http://flatfull.com/themes/assets/musics/Miaow-03-Lentement.ogg"),type:"audio/ogg"}]},{title:"2. Bubble",artist:"Miaow",poster:"img/b1.jpg",sources:[{src:e.trustAsResourceUrl("http://flatfull.com/themes/assets/musics/Miaow-07-Bubble.mp3"),type:"audio/mpeg"},{src:e.trustAsResourceUrl("http://flatfull.com/themes/assets/musics/Miaow-07-Bubble.ogg"),type:"audio/ogg"}]},{title:"3. Partir",artist:"Miaow",poster:"img/b2.jpg",sources:[{src:e.trustAsResourceUrl("http://flatfull.com/themes/assets/musics/Miaow-09-Partir.mp3"),type:"audio/mpeg"},{src:e.trustAsResourceUrl("http://flatfull.com/themes/assets/musics/Miaow-09-Partir.ogg"),type:"audio/ogg"}]}],t.config={sources:t.audios[0].sources,title:t.audios[0].title,repeat:!1,shuffle:!1,autoPlay:!0,theme:{url:"js/app/music/videogular.css"}},t.onPlayerReady=function(e){t.API=e,("play"==t.API.currentState||t.isCompleted)&&t.API.play(),t.isCompleted=!1},t.onComplete=function(){t.isCompleted=!0,t.config.shuffle?t.active=t.getRandom(t.active):t.active++,t.active>=t.audios.length?(t.active=0,t.config.repeat&&t.setActive(t.active)):t.setActive(t.active)},t.getRandom=function(e){var n=Math.floor(Math.random()*t.audios.length);return n-e||(n=t.getRandom(e)),n},t.play=function(e){t.isCompleted=!0,"next"==e?t.active++:t.active--,t.active>=t.audios.length&&(t.active=0),-1==t.active&&(t.active=t.audios.length-1),t.setActive(t.active)},t.setActive=function(e){t.API.stop(),t.config.sources=t.audios[e].sources,t.config.title=t.audios[e].title},t.toggleRepeat=function(){t.config.repeat=!t.config.repeat,t.isCompleted&&t.API.play()},t.toggleShuffle=function(){t.config.shuffle=!t.config.shuffle,console.log(t.API.currentState),t.isCompleted&&t.API.play()},t.video={sources:[{src:e.trustAsResourceUrl("http://flatfull.com/themes/assets/video/big_buck_bunny_trailer.m4v"),type:"video/mp4"},{src:e.trustAsResourceUrl("http://flatfull.com/themes/assets/video/big_buck_bunny_trailer.webm"),type:"video/webm"},{src:e.trustAsResourceUrl("http://flatfull.com/themes/assets/video/big_buck_bunny_trailer.ogv"),type:"video/ogg"}],theme:{url:"js/app/music/videogular.css"},plugins:{controls:{autoHide:!0,autoHideTime:5e3},poster:"img/c1.jpg"}}}]),app.controller("NoteCtrl",["$scope","$http",function(e,t){t.get("js/app/note/notes.json").then(function(t){e.notes=t.data.notes,e.note=e.notes[0],e.notes[0].selected=!0}),e.colors=["primary","info","success","warning","danger","dark"],e.createNote=function(){var t={content:"New note",color:e.colors[Math.floor(3*Math.random())],date:Date.now()};e.notes.push(t),e.selectNote(t)},e.deleteNote=function(t){e.notes.splice(e.notes.indexOf(t),1),t.selected&&(e.note=e.notes[0],e.notes.length&&(e.notes[0].selected=!0))},e.selectNote=function(t){angular.forEach(e.notes,function(e){e.selected=!1}),e.note=t,e.note.selected=!0}}]);var angularSkycons=angular.module("angular-skycons",[]);angularSkycons.directive("skycon",function(){return{restrict:"E",replace:!0,scope:{icon:"=",size:"="},link:function(e,t,n){var o=document.createElement("canvas");n["class"]?o.className=n["class"]:o.className="";var a={};n.color?a.color=n.color:a.color="black";var r=new Skycons(a);e.$watch("size",function(t,n){t?(o.height=t,o.width=t):(o.height=e.size||64,o.width=e.size||64)},!0),e.$watch("icon",function(){r.set(o,e.icon)},!0),r.play(),8===t[0].nodeType?t.replaceWith(o):t[0].appendChild(o),e.$on("$destroy",function(){r.remove(o),0===r.list.length&&r.pause(o)})}}}),app.controller("WeatherCtrl",["$scope","yahooApi","geoApi",function(e,t,n){e.userSearchText="",e.search={},e.forcast={},e.place={},e.data={},n.then(function(t){e.userSearchText=t.data.city+", "+t.data.country_code,e.getLocations()}),e.getLocations=function(){var n='select * from geo.places where text="'+e.userSearchText+'"';t.query({q:n,format:"json"},{},function(t){e.search=t,1!==t.query.count||t.query.results.channel||e.getWeather(t.query.results.place.woeid,t.query.results.place.name,t.query.results.place.country.content)})},e.getWeather=function(n,o,a){e.place.city=o,e.place.country=a;var r="select item from weather.forecast where woeid="+n;t.query({q:r,format:"json"},{},function(t){t.query.results.channel.item.forecast.forEach(function(t,n){t.icon=e.getCustomIcon(t.code)}),t.query.results.channel.item.condition.icon=e.getCustomIcon(t.query.results.channel.item.condition.code),e.data=t})},e.getCustomIcon=function(e){switch(e){case"0":case"1":case"2":case"24":case"25":return"wind";case"5":case"6":case"7":case"18":return"sleet";case"3":case"4":case"8":case"9":case"10":case"11":case"12":case"35":case"37":case"38":case"39":case"40":case"45":case"47":return"rain";case"13":case"14":case"15":case"16":case"17":case"41":case"42":case"43":case"46":return"snow";case"19":case"20":case"21":case"22":case"23":return"fog";case"26":case"27":case"28":case"44":return"cloudy";case"29":return"partly-cloudy-night";case"30":return"partly-cloudy-day";case"31":case"33":return"clear-night";case"32":case"34":case"36":return"clear-day";default:return""}}}]),app.factory("yahooApi",["$resource",function(e){return e("http://query.yahooapis.com/v1/public/yql",{},{query:{method:"GET",isArray:!1}})}]),app.factory("geoApi",["$http",function(e){return e.jsonp("http://muslimsalat.com/daily.json?callback=JSON_CALLBACK")}]),function(e){function t(e,t,n,o){e.beginPath(),e.arc(t,n,o,0,y,!1),e.fill()}function n(e,t,n,o,a){e.beginPath(),e.moveTo(t,n),e.lineTo(o,a),e.stroke()}function o(e,n,o,a,r,i,s,l){var c=Math.cos(n*y),u=Math.sin(n*y);l-=s,t(e,o-u*r,a+c*i+.5*l,s+(1-.5*c)*l)}function a(e,t,n,a,r,i,s,l){var c;for(c=5;c--;)o(e,t+c/5,n,a,r,i,s,l)}function r(e,t,n,o,r,i,s){t/=3e4;var l=.21*r,c=.12*r,u=.24*r,d=.28*r;e.fillStyle=s,a(e,t,n,o,l,c,u,d),e.globalCompositeOperation="destination-out",a(e,t,n,o,l,c,u-i,d-i),e.globalCompositeOperation="source-over"}function i(e,t,o,a,r,i,s){t/=12e4;var l,c,u,d,p=.25*r-.5*i,f=.32*r+.5*i,g=.5*r-.5*i;for(e.strokeStyle=s,e.lineWidth=i,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.arc(o,a,p,0,y,!1),e.stroke(),l=8;l--;)c=(t+l/8)*y,u=Math.cos(c),d=Math.sin(c),n(e,o+u*f,a+d*f,o+u*g,a+d*g)}function s(e,t,n,o,a,r,i){t/=15e3;var s=.29*a-.5*r,l=.05*a,c=Math.cos(t*y),u=c*y/-16;e.strokeStyle=i,e.lineWidth=r,e.lineCap="round",e.lineJoin="round",n+=c*l,e.beginPath(),e.arc(n,o,s,u+y/8,u+7*y/8,!1),e.arc(n+Math.cos(u)*s*w,o+Math.sin(u)*s*w,s,u+5*y/8,u+3*y/8,!0),e.closePath(),e.stroke()}function l(e,t,n,o,a,r,i){t/=1350;var s,l,c,u,d=.16*a,p=11*y/12,f=7*y/12;for(e.fillStyle=i,s=4;s--;)l=(t+s/4)%1,c=n+(s-1.5)/1.5*(1===s||2===s?-1:1)*d,u=o+l*l*a,e.beginPath(),e.moveTo(c,u-1.5*r),e.arc(c,u,.75*r,p,f,!1),e.fill()}function c(e,t,o,a,r,i,s){t/=750;var l,c,u,d,p=.1875*r;for(e.strokeStyle=s,e.lineWidth=.5*i,e.lineCap="round",e.lineJoin="round",l=4;l--;)c=(t+l/4)%1,u=Math.floor(o+(l-1.5)/1.5*(1===l||2===l?-1:1)*p)+.5,d=a+c*r,n(e,u,d-1.5*i,u,d+1.5*i)}function u(e,t,o,a,r,i,s){t/=3e3;var l,c,u,d,p=.16*r,f=.75*i,g=t*y*.7,m=Math.cos(g)*f,h=Math.sin(g)*f,v=g+y/3,w=Math.cos(v)*f,b=Math.sin(v)*f,$=g+2*y/3,C=Math.cos($)*f,M=Math.sin($)*f;for(e.strokeStyle=s,e.lineWidth=.5*i,e.lineCap="round",e.lineJoin="round",l=4;l--;)c=(t+l/4)%1,u=o+Math.sin((c+l/4)*y)*p,d=a+c*r,n(e,u-m,d-h,u+m,d+h),n(e,u-w,d-b,u+w,d+b),n(e,u-C,d-M,u+C,d+M)}function d(e,t,n,o,r,i,s){t/=3e4;var l=.21*r,c=.06*r,u=.21*r,d=.28*r;e.fillStyle=s,a(e,t,n,o,l,c,u,d),e.globalCompositeOperation="destination-out",a(e,t,n,o,l,c,u-i,d-i),e.globalCompositeOperation="source-over"}function p(e,t,n,o,a,r,i){var s=a/8,l=s/3,c=2*l,u=t%1*y,d=Math.cos(u),p=Math.sin(u);e.fillStyle=i,e.strokeStyle=i,e.lineWidth=r,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.arc(n,o,s,u,u+Math.PI,!1),e.arc(n-l*d,o-l*p,c,u+Math.PI,u,!1),e.arc(n+c*d,o+c*p,l,u+Math.PI,u,!0),e.globalCompositeOperation="destination-out",e.fill(),e.globalCompositeOperation="source-over",e.stroke()}function f(e,t,n,o,a,r,i,s,l){t/=2500;var c,u,d,f,g=b[i],m=(t+i-$[i].start)%s,h=(t+i-$[i].end)%s,v=(t+i)%s;if(e.strokeStyle=l,e.lineWidth=r,e.lineCap="round",e.lineJoin="round",1>m){if(e.beginPath(),m*=g.length/2-1,c=Math.floor(m),m-=c,c*=2,c+=2,e.moveTo(n+(g[c-2]*(1-m)+g[c]*m)*a,o+(g[c-1]*(1-m)+g[c+1]*m)*a),1>h){for(h*=g.length/2-1,u=Math.floor(h),h-=u,u*=2,u+=2,f=c;f!==u;f+=2)e.lineTo(n+g[f]*a,o+g[f+1]*a);e.lineTo(n+(g[u-2]*(1-h)+g[u]*h)*a,o+(g[u-1]*(1-h)+g[u+1]*h)*a)}else for(f=c;f!==g.length;f+=2)e.lineTo(n+g[f]*a,o+g[f+1]*a);e.stroke()}else if(1>h){for(e.beginPath(),h*=g.length/2-1,u=Math.floor(h),h-=u,u*=2,u+=2,e.moveTo(n+g[0]*a,o+g[1]*a),f=2;f!==u;f+=2)e.lineTo(n+g[f]*a,o+g[f+1]*a);e.lineTo(n+(g[u-2]*(1-h)+g[u]*h)*a,o+(g[u-1]*(1-h)+g[u+1]*h)*a),e.stroke()}1>v&&(v*=g.length/2-1,d=Math.floor(v),v-=d,d*=2,d+=2,p(e,t,n+(g[d-2]*(1-v)+g[d]*v)*a,o+(g[d-1]*(1-v)+g[d+1]*v)*a,a,r,l))}var g,m;!function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,n=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame;t&&n?(g=function(e,n){function o(){a.value=t(o),e()}var a={value:null};return o(),a},m=function(e){n(e.value)}):(g=setInterval,m=clearInterval)}();var h=500,v=.08,y=2*Math.PI,w=2/Math.sqrt(2),b=[[-.75,-.18,-.7219,-.1527,-.6971,-.1225,-.6739,-.091,-.6516,-.0588,-.6298,-.0262,-.6083,.0065,-.5868,.0396,-.5643,.0731,-.5372,.1041,-.5033,.1259,-.4662,.1406,-.4275,.1493,-.3881,.153,-.3487,.1526,-.3095,.1488,-.2708,.1421,-.2319,.1342,-.1943,.1217,-.16,.1025,-.129,.0785,-.1012,.0509,-.0764,.0206,-.0547,-.012,-.0378,-.0472,-.0324,-.0857,-.0389,-.1241,-.0546,-.1599,-.0814,-.1876,-.1193,-.1964,-.1582,-.1935,-.1931,-.1769,-.2157,-.1453,-.229,-.1085,-.2327,-.0697,-.224,-.0317,-.2064,.0033,-.1853,.0362,-.1613,.0672,-.135,.0961,-.1051,.1213,-.0706,.1397,-.0332,.1512,.0053,.158,.0442,.1624,.0833,.1636,.1224,.1615,.1613,.1565,.1999,.15,.2378,.1402,.2749,.1279,.3118,.1147,.3487,.1015,.3858,.0892,.4236,.0787,.4621,.0715,.5012,.0702,.5398,.0766,.5768,.089,.6123,.1055,.6466,.1244,.6805,.144,.7147,.163,.75,.18],[-.75,0,-.7033,.0195,-.6569,.0399,-.6104,.06,-.5634,.0789,-.5155,.0954,-.4667,.1089,-.4174,.1206,-.3676,.1299,-.3174,.1365,-.2669,.1398,-.2162,.1391,-.1658,.1347,-.1157,.1271,-.0661,.1169,-.017,.1046,.0316,.0903,.0791,.0728,.1259,.0534,.1723,.0331,.2188,.0129,.2656,-.0064,.3122,-.0263,.3586,-.0466,.4052,-.0665,.4525,-.0847,.5007,-.1002,.5497,-.113,.5991,-.124,.6491,-.1325,.6994,-.138,.75,-.14]],$=[{start:.36,end:.11},{start:.56,end:.16}],C=function(e){this.list=[],this.interval=null,this.color=e&&e.color?e.color:"black",this.resizeClear=!(!e||!e.resizeClear)};C.CLEAR_DAY=function(e,t,n){var o=e.canvas.width,a=e.canvas.height,r=Math.min(o,a);i(e,t,.5*o,.5*a,r,r*v,n)},C.CLEAR_NIGHT=function(e,t,n){var o=e.canvas.width,a=e.canvas.height,r=Math.min(o,a);s(e,t,.5*o,.5*a,r,r*v,n)},C.PARTLY_CLOUDY_DAY=function(e,t,n){var o=e.canvas.width,a=e.canvas.height,s=Math.min(o,a);i(e,t,.625*o,.375*a,.75*s,s*v,n),r(e,t,.375*o,.625*a,.75*s,s*v,n)},C.PARTLY_CLOUDY_NIGHT=function(e,t,n){var o=e.canvas.width,a=e.canvas.height,i=Math.min(o,a);s(e,t,.667*o,.375*a,.75*i,i*v,n),r(e,t,.375*o,.625*a,.75*i,i*v,n)},C.CLOUDY=function(e,t,n){var o=e.canvas.width,a=e.canvas.height,i=Math.min(o,a);r(e,t,.5*o,.5*a,i,i*v,n)},C.RAIN=function(e,t,n){var o=e.canvas.width,a=e.canvas.height,i=Math.min(o,a);l(e,t,.5*o,.37*a,.9*i,i*v,n),r(e,t,.5*o,.37*a,.9*i,i*v,n)},C.SLEET=function(e,t,n){var o=e.canvas.width,a=e.canvas.height,i=Math.min(o,a);c(e,t,.5*o,.37*a,.9*i,i*v,n),r(e,t,.5*o,.37*a,.9*i,i*v,n)},C.SNOW=function(e,t,n){var o=e.canvas.width,a=e.canvas.height,i=Math.min(o,a);u(e,t,.5*o,.37*a,.9*i,i*v,n),r(e,t,.5*o,.37*a,.9*i,i*v,n)},C.WIND=function(e,t,n){var o=e.canvas.width,a=e.canvas.height,r=Math.min(o,a);f(e,t,.5*o,.5*a,r,r*v,0,2,n),f(e,t,.5*o,.5*a,r,r*v,1,2,n)},C.FOG=function(e,t,o){var a=e.canvas.width,r=e.canvas.height,i=Math.min(a,r),s=i*v;d(e,t,.5*a,.32*r,.75*i,s,o),t/=5e3;var l=Math.cos(t*y)*i*.02,c=Math.cos((t+.25)*y)*i*.02,u=Math.cos((t+.5)*y)*i*.02,p=Math.cos((t+.75)*y)*i*.02,f=.936*r,g=Math.floor(f-.5*s)+.5,m=Math.floor(f-2.5*s)+.5;e.strokeStyle=o,e.lineWidth=s,e.lineCap="round",e.lineJoin="round",n(e,l+.2*a+.5*s,g,c+.8*a-.5*s,g),n(e,u+.2*a+.5*s,m,p+.8*a-.5*s,m)},C.prototype={_determineDrawingFunction:function(e){return"string"==typeof e&&(e=C[e.toUpperCase().replace(/-/g,"_")]||null),e},add:function(e,t){var n;"string"==typeof e&&(e=document.getElementById(e)),null!==e&&(t=this._determineDrawingFunction(t),"function"==typeof t&&(n={element:e,context:e.getContext("2d"),drawing:t},this.list.push(n),this.draw(n,h)))},set:function(e,t){var n;for("string"==typeof e&&(e=document.getElementById(e)),n=this.list.length;n--;)if(this.list[n].element===e)return this.list[n].drawing=this._determineDrawingFunction(t),void this.draw(this.list[n],h);this.add(e,t)},remove:function(e){var t;for("string"==typeof e&&(e=document.getElementById(e)),t=this.list.length;t--;)if(this.list[t].element===e)return void this.list.splice(t,1)},draw:function(e,t){var n=e.context.canvas;this.resizeClear?n.width=n.width:e.context.clearRect(0,0,n.width,n.height),e.drawing(e.context,t,this.color)},play:function(){var e=this;this.pause(),this.interval=g(function(){var t,n=Date.now();for(t=e.list.length;t--;)e.draw(e.list[t],n)},1e3/60)},pause:function(){this.interval&&(m(this.interval),this.interval=null)}},e.Skycons=C}(this);