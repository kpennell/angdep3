"use strict";app.controller("AccountCtrl",["$scope","simpleLogin","fbutil","user","$state","$rootScope",function(e,o,t,n,r,a){function i(){e.err=null,e.msg=null,e.emailerr=null,e.emailmsg=null}var s=t.syncObject(["users",n.uid]);s.$bindTo(e,"profile"),e.signout=function(){a.FavoritesLength=0,s.$destroy(),o.logout(),r.go("denver.shows")},e.changePassword=function(t,n,r){i(),t&&n&&r?r!==n?e.err="New pass and confirm do not match":o.changePassword(s.email,t,r).then(function(){e.msg="Password changed"},function(o){e.err=o}):e.err="Please fill in all password fields"},e.clear=i,e.changeEmail=function(n,r){i(),s.$destroy(),o.changeEmail(n,r).then(function(o){s=t.syncObject(["users",o.uid]),s.$bindTo(e,"profile"),e.emailmsg="Email changed"},function(o){e.emailerr=o})}}]),app.controller("ShowsCtrl",["$scope","$rootScope","$state","$firebase","$filter","simpleLogin","leafletData","Player",function(e,o,t,n,r,a,i,s){function l(o){var t=o.target;t.setIcon(g),e.$apply(function(){e.hoveritem=t.feature.properties.id.replace(/^\D+/g,"")})}function c(o){var t=o.target;t.setIcon(p),e.$apply(function(){e.hoveritem={}})}var d=new Firebase("https://torid-fire-4332.firebaseio.com"),u=n(d.child("shows"));e.shows=u.$asArray(),e.listShows=[],e.filteredShows=[],e.daysAhead=.5,e.cityoptions=["Denver*","(More Cities Soon)"],e.day=Date.now(),e.selectDay=function(o){var t=Date.now();e.day=o,e.daysAhead=(e.day-t)/864e5},e.days=[e.day+0,e.day+864e5,e.day+1728e5,e.day+2592e5,e.day+3456e5,e.day+432e6,e.day+5184e5],e.radioModel="Right",e.checkModel={left:!1,middle:!1,right:!0},e.checkIfLoggedIn=function(o){null===a.user?t.go("denver.signin"):e.toggleStarred(o)},a.getUser().then(function(t){if(!t)return void 0;var r=n(d.child("users").child(t.uid).child("favorites"));e.loggedInUserFavorites=r.$asObject(),e.loggedInUserFavorites.$loaded(function(){var t=function(){o.FavoritesLength=0,angular.forEach(e.loggedInUserFavorites,function(t,n){e.loggedInUserFavorites[n]===!0&&o.FavoritesLength++})};t(),e.toggleStarred=function(o){e.loggedInUserFavorites[o.properties.id]=e.loggedInUserFavorites[o.properties.id]===!0?!1:void 0===e.loggedInUserFavorites.$value?!0:!0,e.loggedInUserFavorites.$save(),t()}})}),e.shows.$loaded(function(){e.listShows=e.shows[0],e.$watch("daysAhead",function(){e.filteredShows=r("upComing")(e.listShows,"properties.date",e.daysAhead),angular.extend(e,{geojson:{data:e.filteredShows,onEachFeature:function(e,o){o.bindPopup(e.properties.artist+"&nbsp;&#64;&nbsp;"+e.properties.venue_name),o.setIcon(p),o.on({mouseover:l,mouseout:c}),m[e.properties.id]=o}}})})}),e.player=s,e.$on("statusChanged",function(){e.$$phase||e.$digest()}),e.$watch("player.currentTrack.properties.id",function(){angular.element(".list-group-item").removeClass("playing"),s.currentTrack&&s.currentTrack.properties.id&&angular.element(".list-group-item"+s.currentTrack.properties.id).addClass("playing")}),e.setPosition=function(e){var o=(e.pageX-e.currentTarget.offsetLeft)/e.currentTarget.offsetWidth;s.setPosition(o)},angular.extend(e,{center:{lat:39.744213,lng:-104.990456,zoom:13,scrollWheelZoom:"center"},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoia3Blbm5lbGwiLCJhIjoid3QxaFNMTSJ9.5HjAo-fmMghcHGeCMOMheg",maxZoom:16,path:{weight:2,color:"#800000",opacity:1}}});var p=L.icon({iconUrl:"img/marker-icon.png",shadowUrl:"img/marker-shadow.png",popupAnchor:[1,-24],iconAnchor:[13,27]}),g=L.icon({iconUrl:"img/marker-green.png",shadowUrl:"img/marker-shadow.png",popupAnchor:[1,-24],iconAnchor:[13,27]}),m={};e.hoveritem={},e.menuMouse=function(e){var o=m[e.properties.id];o.setIcon(g),o.openPopup()},e.menuMouseout=function(e){var o=m[e.properties.id];o.setIcon(p),o.closePopup()}}]),app.controller("AccordionDemoCtrl",["$scope",function(e){e.oneAtATime=!0,e.groups=[{title:"Accordion group header - #1",content:"Dynamic group body - #1"},{title:"Accordion group header - #2",content:"Dynamic group body - #2"}],e.items=["Item 1","Item 2","Item 3"],e.addItem=function(){var o=e.items.length+1;e.items.push("Item "+o)},e.status={isFirstOpen:!0,isFirstDisabled:!1}}]),app.controller("AlertDemoCtrl",["$scope",function(e){e.alerts=[{type:"success",msg:"Well done! You successfully read this important alert message."},{type:"info",msg:"Heads up! This alert needs your attention, but it is not super important."},{type:"warning",msg:"Warning! Best check yo self, you are not looking too good..."}],e.addAlert=function(){e.alerts.push({type:"danger",msg:"Oh snap! Change a few things up and try submitting again."})},e.closeAlert=function(o){e.alerts.splice(o,1)}}]),app.controller("ButtonsDemoCtrl",["$scope",function(e){e.singleModel=1,e.radioModel="Middle",e.checkModel={left:!1,middle:!0,right:!1}}]),app.controller("CarouselDemoCtrl",["$scope",function(e){e.myInterval=5e3;var o=e.slides=[];e.addSlide=function(){o.push({image:"img/c"+o.length+".jpg",text:["Carousel text #0","Carousel text #1","Carousel text #2","Carousel text #3"][o.length%4]})};for(var t=0;4>t;t++)e.addSlide()}]),app.controller("DropdownDemoCtrl",["$scope",function(e){e.items=["The first choice!","And another choice for you.","but wait! A third!"],e.status={isopen:!1},e.toggled=function(){},e.toggleDropdown=function(o){o.preventDefault(),o.stopPropagation(),e.status.isopen=!e.status.isopen}}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(e,o,t){e.items=t,e.selected={item:e.items[0]},e.ok=function(){o.close(e.selected.item)},e.cancel=function(){o.dismiss("cancel")}}]),app.controller("ModalDemoCtrl",["$scope","$modal","$log",function(e,o,t){e.items=["item1","item2","item3"],e.open=function(n){var r=o.open({templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:n,resolve:{items:function(){return e.items}}});r.result.then(function(o){e.selected=o},function(){t.info("Modal dismissed at: "+new Date)})}}]),app.controller("PaginationDemoCtrl",["$scope","$log",function(e,o){e.totalItems=64,e.currentPage=4,e.setPage=function(o){e.currentPage=o},e.pageChanged=function(){o.info("Page changed to: "+e.currentPage)},e.maxSize=5,e.bigTotalItems=175,e.bigCurrentPage=1}]),app.controller("PopoverDemoCtrl",["$scope",function(e){e.dynamicPopover="Hello, World!",e.dynamicPopoverTitle="Title"}]),app.controller("ProgressDemoCtrl",["$scope",function(e){e.max=200,e.random=function(){var o,t=Math.floor(100*Math.random()+1);o=25>t?"success":50>t?"info":75>t?"warning":"danger",e.showWarning="danger"===o||"warning"===o,e.dynamic=t,e.type=o},e.random(),e.randomStacked=function(){e.stacked=[];for(var o=["success","info","warning","danger"],t=0,n=Math.floor(4*Math.random()+1);n>t;t++){var r=Math.floor(4*Math.random());e.stacked.push({value:Math.floor(30*Math.random()+1),type:o[r]})}},e.randomStacked()}]),app.controller("TabsDemoCtrl",["$scope",function(e){e.tabs=[{title:"Dynamic Title 1",content:"Dynamic content 1"},{title:"Dynamic Title 2",content:"Dynamic content 2",disabled:!0}]}]),app.controller("RatingDemoCtrl",["$scope",function(e){e.rate=7,e.max=10,e.isReadonly=!1,e.hoveringOver=function(o){e.overStar=o,e.percent=100*(o/e.max)}}]),app.controller("TooltipDemoCtrl",["$scope",function(e){e.dynamicTooltip="Hello, World!",e.dynamicTooltipText="dynamic",e.htmlTooltip="I've been made <b>bold</b>!"}]),app.controller("TypeaheadDemoCtrl",["$scope","$http",function(e,o){e.selected=void 0,e.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],e.getLocation=function(e){return o.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:e,sensor:!1}}).then(function(e){var o=[];return angular.forEach(e.data.results,function(e){o.push(e.formatted_address)}),o})}}]),app.controller("DatepickerDemoCtrl",["$scope",function(e){e.today=function(){e.dt=new Date},e.today(),e.clear=function(){e.dt=null},e.disabled=function(e,o){return"day"===o&&(0===e.getDay()||6===e.getDay())},e.toggleMin=function(){e.minDate=e.minDate?null:new Date},e.toggleMin(),e.open=function(o){o.preventDefault(),o.stopPropagation(),e.opened=!0},e.dateOptions={formatYear:"yy",startingDay:1,"class":"datepicker"},e.initDate=new Date("2016-15-20"),e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0]}]),app.controller("TimepickerDemoCtrl",["$scope",function(e){e.mytime=new Date,e.hstep=1,e.mstep=15,e.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},e.ismeridian=!0,e.toggleMode=function(){e.ismeridian=!e.ismeridian},e.update=function(){var o=new Date;o.setHours(14),o.setMinutes(0),e.mytime=o},e.changed=function(){},e.clear=function(){e.mytime=null}}]),app.controller("FlotChartDemoCtrl",["$scope",function(e){e.d=[[1,6.5],[2,6.5],[3,7],[4,8],[5,7.5],[6,7],[7,6.8],[8,7],[9,7.2],[10,7],[11,6.8],[12,7]],e.d0_1=[[0,7],[1,6.5],[2,12.5],[3,7],[4,9],[5,6],[6,11],[7,6.5],[8,8],[9,7]],e.d0_2=[[0,4],[1,4.5],[2,7],[3,4.5],[4,3],[5,3.5],[6,6],[7,3],[8,4],[9,3]],e.d1_1=[[10,120],[20,70],[30,70],[40,60]],e.d1_2=[[10,50],[20,60],[30,90],[40,35]],e.d1_3=[[10,80],[20,40],[30,30],[40,20]],e.d2=[];for(var o=0;20>o;++o)e.d2.push([o,Math.round(100*Math.sin(o))/100]);e.d3=[{label:"iPhone5S",data:40},{label:"iPad Mini",data:10},{label:"iPad Mini Retina",data:20},{label:"iPhone4S",data:12},{label:"iPad Air",data:18}],e.refreshData=function(){e.d0_1=e.d0_2},e.getRandomData=function(){var e=[],o=150;for(e.length>0&&(e=e.slice(1));e.length<o;){var t=e.length>0?e[e.length-1]:50,n=t+10*Math.random()-5;0>n?n=0:n>100&&(n=100),e.push(Math.round(100*n)/100)}for(var r=[],a=0;a<e.length;++a)r.push([a,e[a]]);return r},e.d4=e.getRandomData()}]),app.controller("ctrlname",["$scope","$http","$state",function(e){e.user={},e.authError=null,e.login=function(){e.authError=null}}]),app.controller("FavoritesCtrl",["$scope","$rootScope","$firebase","simpleLogin","$location",function(e,o,t,n){var r=new Firebase("https://torid-fire-4332.firebaseio.com"),a=t(r.child("shows"));e.shows=a.$asArray(),n.getUser().then(function(n){var a=t(r.child("users").child(n.uid).child("favorites"));e.UserFavorites=a.$asObject(),e.UserFavorites.$loaded(function(){var t;t=e.shows[0],e.currentlyFavorited=[],angular.forEach(t,function(o,n){e.UserFavorites[o.properties.id]===!0&&e.currentlyFavorited.push(t[n])});var n=function(){o.FavoritesLength=0,angular.forEach(e.UserFavorites,function(t,n){e.UserFavorites[n]===!0&&o.FavoritesLength++})};n(),e.toggleStarred=function(o){e.UserFavorites[o.properties.id]=e.UserFavorites[o.properties.id]===!0?!1:void 0===e.UserFavorites.$value?!0:!0,n(),e.UserFavorites.$save()}})}),e.favorite={},e.streamTrack=function(o){SC.stream(o.properties.stream_url,function(o){e.sound=o,soundManager.stopAll(),o.play()}),o.visible=!1},e.pauseTrack=function(o){e.sound.pause(),o.visible=!0}}]),app.controller("HomeCtrl",["$scope","$fbutil","user",function(e){e.syncedValue=fbutil.syncObject("syncedValue"),e.user=user,e.FBURL=FBURL}]),app.controller("SignInCtrl",["$scope","simpleLogin","$state","$firebaseSimpleLogin","$rootScope",function(e,o,t,n,r){function a(){return e.email?e.pass&&e.confirm?e.createMode&&e.pass!==e.confirm&&(e.err="Passwords do not match"):e.err="Please enter a password":e.err="Please enter an email address",!e.err}function i(e){return angular.isObject(e)&&e.code?e.code:e+""}e.email=null,e.pass=null,e.confirm=null,e.createMode=!1;var s=new Firebase("https://torid-fire-4332.firebaseio.com");e.auth=n(s),e.user=null,e.loginFacebook=function(o){e.auth.$login(o)},r.$on("$firebaseSimpleLogin:login",function(o,n){e.user=n,t.go("denver.shows")}),r.$on("$firebaseSimpleLogin:logout",function(){e.user=null}),r.$on("$firebaseSimpleLogin:error",function(e,o){console.log("Error logging user in: ",o)}),e.loginEmail=function(n,r){e.err=null,o.login(n,r).then(function(){t.go("denver.shows")},function(o){e.err=i(o)})},e.createAccount=function(){e.err=null,a()&&o.createAccount(e.email,e.pass).then(function(){t.go("denver.signin")},function(o){e.err=i(o)})},e.sendPasswordResetEmail=function(o){var r=new Firebase("https://torid-fire-4332.firebaseio.com");e.loginObj=n(r),e.loginObj.$sendPasswordResetEmail(o).then(function(){e.resetForm=!1,e.resetEmail="",t.go("denver.shows")},function(o){"INVALID_EMAIL"===o.code?(e.errors.push("There is no account associated with that email"),e.resetForm=!1):e.errors.push("Something went wrong..")})}}]);